{% extends 'base.html.twig' %}

{% block title %}
    {{ inventory.title }}
{% endblock %}

{% block body %}
    <h1 class="mb-4">
        {{ inventory.title }}
    </h1>

    {# ───── ACL BADGES (серые) ───── #}
    <div class="mb-3">
        {% if is_granted('ROLE_ADMIN') %}
            <span class="badge bg-dark">ADMIN</span>
        {% endif %}

        {% if inventory.owner == app.user %}
            <span class="badge bg-secondary">OWNER</span>
        {% endif %}
    </div>

    <div class="mb-3">
        {% if is_granted('INVENTORY_VIEW', inventory) %}
            <span class="badge text-bg-light border">VIEW</span>
        {% endif %}

        {% if is_granted('INVENTORY_EDIT', inventory) %}
            <span class="badge text-bg-light border">EDIT</span>
        {% endif %}

        {% if is_granted('INVENTORY_CREATE_ITEM', inventory) %}
            <span class="badge text-bg-light border">CREATE ITEM</span>
        {% endif %}
    </div>

    <div class="card mb-4">
        <div class="card-body">
            <p><strong>Category:</strong> {{ inventory.category }}</p>
            <p><strong>Description:</strong> {{ inventory.description }}</p>
            <p><strong>Owner:</strong> {{ inventory.owner.email }}</p>
            <p>
                <strong>Public:</strong>
                {% if inventory.isPublic %}
                    <span class="badge bg-secondary">Yes</span>
                {% else %}
                    <span class="badge bg-light text-dark border">No</span>
                {% endif %}
            </p>
        </div>
    </div>

    {# ───── ACTION BUTTONS (серые) ───── #}
    <div class="mb-4">
        {% if is_granted('INVENTORY_CREATE_ITEM', inventory) %}
            <a
                    href="{{ path('inventory_items_index', { id: inventory.id }) }}"
                    class="btn btn-outline-secondary btn-sm"
            >
                + Add item
            </a>
        {% endif %}

        {% if is_granted('INVENTORY_EDIT', inventory) %}
            <button
                    class="btn btn-outline-dark btn-sm ms-2"
                    disabled
                    title="UI placeholder"
            >
                Edit Inventory
            </button>
        {% endif %}
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="alert alert-light border">
                <strong>Items</strong><br>
                CRUD + Autosave (implemented backend)
            </div>
        </div>

        <div class="col-md-6">
            <div class="alert alert-light border">
                <strong>Discussion</strong><br>
                Polling + Likes
            </div>
        </div>
    </div>

    <hr>

    <p class="text-muted">
        UI is intentionally minimal.<br>
        ACL, autosave, polling and likes are implemented at backend level and reflected here via permissions.
    </p>
{% endblock %}
